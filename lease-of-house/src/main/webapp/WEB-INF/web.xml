<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
                      http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
	version="3.1" metadata-complete="true">
	<display-name>lease-of-house</display-name>

	<!-- 请求处理的 Filter -->
	<!-- <filter>
		<filter-name>requestFilter</filter-name>
		<filter-class>science.mrcuijt.loh.filter.RequestFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>requestFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping> -->
	
	<!-- XSS 处理的 Filter -->
	<filter>
		<filter-name>xssFilter</filter-name>
		<filter-class>science.mrcuijt.loh.filter.XssFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>xssFilter</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>

	<!-- A filter that sets character encoding that is used to decode -->
	<!-- parameters in a POST request -->
	<filter>
		<filter-name>setCharacterEncodingFilter</filter-name>
		<filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
	</filter>
	
	<!-- The mapping for the Set Character Encoding Filter -->
	<filter-mapping>
        <filter-name>setCharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

	<!-- 配置 StatViewServlet -->
	<!-- （1）提供监控信息展示的 html 页面 -->
	<!-- （2）提供监控信息的JSON API -->
	<servlet>
		<servlet-name>DruidStatView</servlet-name>
		<servlet-class>com.alibaba.druid.support.http.StatViewServlet</servlet-class>
		<init-param>
			<!-- 允许清空统计数据 -->
			<param-name>resetEnable</param-name>
			<param-value>true</param-value>
		</init-param>
		<init-param>
			<!-- 用户名 -->
			<param-name>loginUsername</param-name>
			<param-value>druid</param-value>
		</init-param>
		<init-param>
			<!-- 密码 -->
			<param-name>loginPassword</param-name>
			<param-value>druid</param-value>
		</init-param>
	</servlet>
	<servlet-mapping>
		<servlet-name>DruidStatView</servlet-name>
		<url-pattern>/druid/*</url-pattern>
	</servlet-mapping>

	<!-- 配置 WebStatFilter -->
	<!-- WebStatFilter 用于采集 web-jdbc 关联监控的数据。 -->
	<filter>
		<filter-name>DruidWebStatFilter</filter-name>
		<filter-class>com.alibaba.druid.support.http.WebStatFilter</filter-class>
		<init-param>
			<param-name>exclusions</param-name>
			<param-value>*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*</param-value>
		</init-param>
		<init-param>
			<!-- 缺省sessionStatMaxCount是1000个。你可以按需要进行配置 -->
			<param-name>sessionStatMaxCount</param-name>
			<param-value>1000</param-value>
		</init-param>
		<init-param>
			<!-- druid 0.2.7版本开始支持profile，配置profileEnable能够监控单个url调用的sql列表。 -->
			<param-name>profileEnable</param-name>
			<param-value>true</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>DruidWebStatFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	
	<!-- 检查用户登录的过滤器 -->
	<filter>
		<filter-name>loginFilter</filter-name>
		<filter-class>science.mrcuijt.loh.filter.LoginFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>loginFilter</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>

	<!-- 负责创建新的用户会话标识的过滤器 -->
	<filter>
		<filter-name>newSessionFilter</filter-name>
		<filter-class>science.mrcuijt.loh.filter.NewSessionFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>newSessionFilter</filter-name>
		<servlet-name>loginServlet</servlet-name>
	</filter-mapping>

	<!-- 登录的 Servlet -->
	<servlet>
		<servlet-name>loginServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.LoginServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loginServlet</servlet-name>
		<url-pattern>/login.do</url-pattern>
	</servlet-mapping>
	
	<!-- 验证码生成的 Servlet -->
	<servlet>
		<servlet-name>verifyCodeServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.VerifyCodeServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>verifyCodeServlet</servlet-name>
		<url-pattern>/verifyCode.do</url-pattern>
	</servlet-mapping>

	<!-- 登出的 Servlet -->
	<servlet>
		<servlet-name>logoutServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.LogoutServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>logoutServlet</servlet-name>
		<url-pattern>/logout.do</url-pattern>
	</servlet-mapping>

	<!-- 用户注册的 Servlet -->
	<servlet>
		<servlet-name>registerServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.RegisterServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>registerServlet</servlet-name>
		<url-pattern>/register.do</url-pattern>
	</servlet-mapping>

	<!-- 显示注册结果的 Servlet -->
	<servlet>
		<servlet-name>registerResultServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.RegisterResultServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>registerResultServlet</servlet-name>
		<url-pattern>/registerResult.do</url-pattern>
	</servlet-mapping>


	<!--  -->
	<servlet>
		<servlet-name>loh.mainServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.MainServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.mainServlet</servlet-name>
		<url-pattern>/loh/main.do</url-pattern>
	</servlet-mapping>

	<!-- 房屋租赁者主页的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.mainServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.MainServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.mainServlet</servlet-name>
		<url-pattern>/loh/lease/main.do</url-pattern>
	</servlet-mapping>

	<!-- 发布房屋租赁信息的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.releaseHouseServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.ReleaseHouseServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.releaseHouseServlet</servlet-name>
		<url-pattern>/loh/lease/releaseHouse.do</url-pattern>
	</servlet-mapping>

	<!-- 显示房屋租赁信息的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.showReleaseHouseServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.ShowReleaseHouseServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.showReleaseHouseServlet</servlet-name>
		<url-pattern>/loh/lease/showReleaseHouse.do</url-pattern>
	</servlet-mapping>
	
	<!-- 去更新房屋租赁信息的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.toUpdateReleaseHouseServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.ToUpdateReleaseHouseServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.toUpdateReleaseHouseServlet</servlet-name>
		<url-pattern>/loh/lease/toUpdateReleaseHouse.do</url-pattern>
	</servlet-mapping>
	
	<!-- 更新房屋租赁信息的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.updateReleaseHouseServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.UpdateReleaseHouseServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.updateReleaseHouseServlet</servlet-name>
		<url-pattern>/loh/lease/updateReleaseHouse.do</url-pattern>
	</servlet-mapping>
	
	<!-- 去删除新房屋租赁信息的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.toDeleteReleaseHouseServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.ToDeleteReleaseHouseServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.toDeleteReleaseHouseServlet</servlet-name>
		<url-pattern>/loh/lease/toDeleteReleaseHouse.do</url-pattern>
	</servlet-mapping>
	
	<!-- 删除新房屋租赁信息的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.deleteLohHouseInfoServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.DeleteLohHouseInfoServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.deleteLohHouseInfoServlet</servlet-name>
		<url-pattern>/loh/lease/deleteLohHouseInfo.do</url-pattern>
	</servlet-mapping>
	
	<!-- 删除新房屋租赁信息结果的 Servlet -->
	<servlet>
		<servlet-name>loh.lease.deleteLohHouseInfoResultServelt</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.DeleteLohHouseInfoResultServelt</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.lease.deleteLohHouseInfoResultServelt</servlet-name>
		<url-pattern>/loh/lease/deleteLohHouseInfoResult.do</url-pattern>
	</servlet-mapping>
	
	<!-- 管理平台主页 -->
	<servlet>
		<servlet-name>loh.admin.mainServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.admin.MainServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.admin.mainServlet</servlet-name>
		<url-pattern>/loh/admin/main.do</url-pattern>
	</servlet-mapping>
	
	<!-- 管理平台添加数据页 -->
	<servlet>
		<servlet-name>loh.admin.data.addDataServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.admin.data.AddDataServlet</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>loh.admin.data.addDataServlet</servlet-name>
		<url-pattern>/loh/admin/data/addData.do</url-pattern>
	</servlet-mapping>
	
	<!-- 查询地区信息的 Servlet -->
	<servlet>
		<servlet-name>loh.getRegionServlet</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.loh.lease.GetRegionServlet</servlet-class>
	</servlet>
	<servlet-mapping>
		<servlet-name>loh.getRegionServlet</servlet-name>
		<url-pattern>/loh/getRegion.do</url-pattern>
	</servlet-mapping>
	
	<!-- 禁用不安全的 HTTP 方法 -->
	<security-constraint>
		<web-resource-collection>
			<web-resource-name>restricted methods</web-resource-name>
			<url-pattern>/*</url-pattern>
			<http-method>PUT</http-method>
			<http-method>DELETE</http-method>
			<http-method>HEAD</http-method>
			<http-method>OPTIONS</http-method>
			<http-method>TRACE</http-method>
		</web-resource-collection>
		<auth-constraint />
	</security-constraint>

	<servlet>
		<servlet-name>ErrorHandler</servlet-name>
		<servlet-class>science.mrcuijt.loh.servlet.ErrorHandler</servlet-class>
	</servlet>

	<servlet-mapping>
		<servlet-name>ErrorHandler</servlet-name>
		<url-pattern>/ErrorHandler</url-pattern>
	</servlet-mapping>

	<error-page>
		<error-code>404</error-code>
		<location>/WEB-INF/html/common/404.jsp</location>
	</error-page>

	<error-page>
		<exception-type>java.lang.Throwable</exception-type>
		<location>/ErrorHandler</location>
	</error-page>

	<welcome-file-list>
		<!-- <welcome-file>index.html</welcome-file> <welcome-file>index.htm</welcome-file> 
			<welcome-file>index.jsp</welcome-file> <welcome-file>default.html</welcome-file> 
			<welcome-file>default.htm</welcome-file> <welcome-file>default.jsp</welcome-file> -->
		<welcome-file>/WEB-INF/html/index.jsp</welcome-file>
	</welcome-file-list>

</web-app>